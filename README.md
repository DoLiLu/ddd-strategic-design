# 키친포스

## 퀵 스타트

```sh
cd docker
docker compose -p kitchenpos up -d
```

## 요구 사항

### 상품

- 상품을 등록할 수 있다.
- 상품의 가격이 올바르지 않으면 등록할 수 없다.
    - 상품의 가격은 0원 이상이어야 한다.
- 상품의 이름이 올바르지 않으면 등록할 수 없다.
    - 상품의 이름에는 비속어가 포함될 수 없다.
- 상품의 가격을 변경할 수 있다.
- 상품의 가격이 올바르지 않으면 변경할 수 없다.
    - 상품의 가격은 0원 이상이어야 한다.
- 상품의 가격이 변경될 때 메뉴의 가격이 메뉴에 속한 상품 금액의 합보다 크면 메뉴가 숨겨진다.
- 상품의 목록을 조회할 수 있다.

### 메뉴 그룹

- 메뉴 그룹을 등록할 수 있다.
- 메뉴 그룹의 이름이 올바르지 않으면 등록할 수 없다.
    - 메뉴 그룹의 이름은 비워 둘 수 없다.
- 메뉴 그룹의 목록을 조회할 수 있다.

### 메뉴

- 1 개 이상의 등록된 상품으로 메뉴를 등록할 수 있다.
- 상품이 없으면 등록할 수 없다.
- 메뉴에 속한 상품의 수량은 0 이상이어야 한다.
- 메뉴의 가격이 올바르지 않으면 등록할 수 없다.
    - 메뉴의 가격은 0원 이상이어야 한다.
- 메뉴에 속한 상품 금액의 합은 메뉴의 가격보다 크거나 같아야 한다.
- 메뉴는 특정 메뉴 그룹에 속해야 한다.
- 메뉴의 이름이 올바르지 않으면 등록할 수 없다.
    - 메뉴의 이름에는 비속어가 포함될 수 없다.
- 메뉴의 가격을 변경할 수 있다.
- 메뉴의 가격이 올바르지 않으면 변경할 수 없다.
    - 메뉴의 가격은 0원 이상이어야 한다.
- 메뉴에 속한 상품 금액의 합은 메뉴의 가격보다 크거나 같아야 한다.
- 메뉴를 노출할 수 있다.
- 메뉴의 가격이 메뉴에 속한 상품 금액의 합보다 높을 경우 메뉴를 노출할 수 없다.
- 메뉴를 숨길 수 있다.
- 메뉴의 목록을 조회할 수 있다.

### 주문 테이블

- 주문 테이블을 등록할 수 있다.
- 주문 테이블의 이름이 올바르지 않으면 등록할 수 없다.
    - 주문 테이블의 이름은 비워 둘 수 없다.
- 빈 테이블을 해지할 수 있다.
- 빈 테이블로 설정할 수 있다.
- 완료되지 않은 주문이 있는 주문 테이블은 빈 테이블로 설정할 수 없다.
- 방문한 손님 수를 변경할 수 있다.
- 방문한 손님 수가 올바르지 않으면 변경할 수 없다.
    - 방문한 손님 수는 0 이상이어야 한다.
- 빈 테이블은 방문한 손님 수를 변경할 수 없다.
- 주문 테이블의 목록을 조회할 수 있다.

### 주문

- 1개 이상의 등록된 메뉴로 배달 주문을 등록할 수 있다.
- 1개 이상의 등록된 메뉴로 포장 주문을 등록할 수 있다.
- 1개 이상의 등록된 메뉴로 매장 주문을 등록할 수 있다.
- 주문 유형이 올바르지 않으면 등록할 수 없다.
- 메뉴가 없으면 등록할 수 없다.
- 매장 주문은 주문 항목의 수량이 0 미만일 수 있다.
- 매장 주문을 제외한 주문의 경우 주문 항목의 수량은 0 이상이어야 한다.
- 배달 주소가 올바르지 않으면 배달 주문을 등록할 수 없다.
    - 배달 주소는 비워 둘 수 없다.
- 빈 테이블에는 매장 주문을 등록할 수 없다.
- 숨겨진 메뉴는 주문할 수 없다.
- 주문한 메뉴의 가격은 실제 메뉴 가격과 일치해야 한다.
- 주문을 접수한다.
- 접수 대기 중인 주문만 접수할 수 있다.
- 배달 주문을 접수되면 배달 대행사를 호출한다.
- 주문을 서빙한다.
- 접수된 주문만 서빙할 수 있다.
- 주문을 배달한다.
- 배달 주문만 배달할 수 있다.
- 서빙된 주문만 배달할 수 있다.
- 주문을 배달 완료한다.
- 배달 중인 주문만 배달 완료할 수 있다.
- 주문을 완료한다.
- 배달 주문의 경우 배달 완료된 주문만 완료할 수 있다.
- 포장 및 매장 주문의 경우 서빙된 주문만 완료할 수 있다.
- 주문 테이블의 모든 매장 주문이 완료되면 빈 테이블로 설정한다.
- 완료되지 않은 매장 주문이 있는 주문 테이블은 빈 테이블로 설정하지 않는다.
- 주문 목록을 조회할 수 있다.

## 용어 사전

### 상품

| 한글명 | 영문명              | 설명                                                                                                  |
|-----|------------------|-----------------------------------------------------------------------------------------------------|
| 상품  | product          | 상품정보                                                                                                |
| 가격  | price            | 상품을 구매할 수 있는 금액                                                                                     |
| 상품명 | name             | 상품의 이름                                                                                              |

### 메뉴 그룹

| 한글명      | 영문명        | 설명                                        |
|----------|------------|-------------------------------------------|
| 메뉴 그룹    | menu-group | 메뉴 그룹 정보 - 비슷한 메뉴들에 대하여 같은 메뉴 그룹으로 묶어 사용  |
| 메뉴 그룹 이름 | name       | 메뉴그룹의 이름 e.g. 인기메뉴, 시즌메뉴, 특가메뉴, 한마리치킨메뉴 등 |

### 메뉴

| 한글명    | 영문명          | 설명                                      |
|--------|--------------|-----------------------------------------|
| 메뉴     | menu         | 메뉴정보 - 이름, 가격, 메뉴 그룹, 구성상품목록으로 구성되어 있다. |
| 구성상품목록 | menu-product | 상품과 상품개수로 구성된 목록                        |
| 메뉴 노출  | display      | 메뉴 노출 상태 (노출, 숨김)                       |
| 노출하다   | display      | 판매하려는 메뉴(숨겨진 메뉴)를 손님에게 공개하는 행위.         |
| 숨기다    | hide         | 손님이 주문할 수 없도록 노출된 메뉴를 감추는 행위.           |

### 주문 테이블

| 한글명      | 영문명            | 설명                                                              |
|----------|----------------|-----------------------------------------------------------------|
| 주문테이블    | order-table    | 테이블 정보 - 테이블 이름, 사용 가능 여부, 손님 수를 포함한다.                          |
| 빈 테이블    | empty-table    | 사용하지 않고 있는 주문 테이블                                               |
| 빈 테이블 해지 | sit            | 손님들이 테이블에 착석한 경우, 해당 테이블을 '이용중'상태로 변경하는 행위.                     |
| 빈 테이블 설정 | clear          | 사용이 끝난 테이블을 빈 테이블로 변경하는 행위. 빈 테이블 상태로 변경하고, 방문한 손님 수를 0으로 설정한다. |
| 방문한 손님 수 | numberOfGuests | 테이블에 착석한 손님 수.                                                  |

### 주문

| 한글명       | 영문명              | 설명                                                                                                  |
|-----------|------------------|-----------------------------------------------------------------------------------------------------|
| 주문        | order            | 주문 정보 - 주문 종류, 주문 상태, 배달 주소를 포함한다.                                                                  |
| 주문 상태     | order-status     | 주문 상태 - 접수 대기중, 주문 접수, 서빙, 배달중, 배달 완료, 주문 완료의 6가지 상태를 갖는다.                                          |
| 접수대기      | waiting          | 등록한 주문의 최초 상태.                                                                                      |
| 접수        | accepted         | 주문을 확인하고, 조리를 시작한 상태.                                                                               |
| 서빙        | served           | "조리 완료된 주문을 손님에게 전달 가능한 상태, 배달주문, 포장주문인 경우 - 조리완료된 음식을 포장한 상태, 매장주문인 경우 - 조리완료된 음식을 주문테이블에 갖다준 상태." |
| 배달중       | delivering       | 배달대행사에서 조리완료된 음식을 픽업한 상태.                                                                           |
| 배달완료      | delivered        | 손님이 음식을 받은 상태.                                                                                      |
| 주문완료      | completed        | 주문이 완료된 상태. 요청받은 주문에 대한 처리를 완료한 상태.                                                                 |
| 주문 유형     | order-type       | 주문 유형 - 배달 주문, 포장 주문, 매장 주문의 3가지 종류를 갖는다.                                                           |
| 배달주문      | delivery         | 주문한 음식을 손님이 있는 곳으로 배달하는 유형의 주문. 주문유형, 주문상태, 주문일시, 배달주소, 주문메뉴정보로 구성되어 있다.                            |
| 포장주문      | takeout          | 주문한 음식을 매장에 방문해서 가저가는 유형의 주문. 주문유형, 주문상태, 주문일시, 주문메뉴정보로 구성되어 있다.                                    |
| 매장주문      | eat-in           | 주문한 음식을 매장에서 먹는 유형의 주문. 주문유형, 주문상태, 주문일시, 주문테이블, 주문메뉴정보로 구성되어 있다.                                   |
| 배달주소      | deliveryAddress  | 음식을 배달해야하는 목적지. - 배달 주문의 경우에 필요하다.                                                                  |
| 주문접수      | accept           | 들어온 주문을 확인하고 조리를 시작하는 행위.                                                                           |
| 배달 대행사 호출 | request delivery | 배달대행사에게 배달을 요청하는 행위. 주문번호, 주문금액, 배달주소를 전달한다.                                                        |
| 배달 대행사    | delivery-agency  | 배달을 대신 해주는 회사                                                                                       |
| 서빙        | serving          | 조리완료된 음식을 포장 또는 손님에게 전달하는 행위.                                                                       |

## 모델링

### 상품
- 상품은 식별자, 이름, 가격을 가진다.
- 상품의 이름에는 비속어가 포함될 수 없다.

### 메뉴
- 메뉴는 식별자, 이름, 가격, 메뉴 상품을 갖는다.
- 메뉴의 가격은 메뉴 상품 금액의 합 이하 여야 한다.
- 메뉴의 가격이 메뉴 상품 금액의 합보다 크면 비공개가 된다.
- 메뉴 상품은 가격과 수를 갖는다.
- 메뉴는 메뉴 그룹에 속한다.

### 메뉴 그룹
- 메뉴 그룹은 식별자와 이름을 갖는다.
- 메뉴 그룹은 메뉴리스트를 갖는다. 

### 매장 주문
- 주문테이블은 식별자, 이름, 고객 수를 갖는다.
- 주문테이블의 주문이 완료되면 빈 테이블이 된다.
- 빈 테이블의 고객 수는 0이다.
- 주문은 접수 대기 -> 접수 -> 서빙 -> 계산 완료 순서로 진행된다.
- 주문은 식별자, 주문 상태, 주문 시간, OrderLineItems를 갖는다.
- OrderLineItem은 가격과 수량을 갖는다.

### 배달 주문
- 주문은 식별자, 주문 상태, 주문 시간, 배달 주소, OrderLineItems를 갖는다.
- 주문은 접수 대기 -> 접수 -> 서빙 -> 배달 -> 배달 완료 -> 계산 완료 순서로 진행된다.
- 주문이 접수되면 배달 대행사가 호출된다.
- OrderLineItem은 가격과 수량을 갖는다.
- OrderLineItem은 수량은 1보다 커야 한다.

### 포장 주문
- 주문은 식별자, 주문 상태, 주문 시간, OrderLineItems를 갖는다.
- 주문은 접수 대기 -> 접수 -> 서빙 -> 계산 완료 순서로 진행된다.
- OrderLineItem은 가격과 수량을 갖는다.
- OrderLineItem은 수량은 1보다 커야 한다.

